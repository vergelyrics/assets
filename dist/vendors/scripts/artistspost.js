!function(){let e=null,t=null,s=null;async function r(){if(e){try{e.destroy()}catch(e){console.warn(e)}const r=document.querySelector(".splideCreditsArtist");r&&r.parentNode&&r.parentNode.removeChild(r),function(){const e=document.querySelector(".songCredits");if(!e)return;const r=e.querySelector(".sc-prev-btn"),i=e.querySelector(".sc-next-btn");r&&t&&r.removeEventListener("click",t),i&&s&&i.removeEventListener("click",s),t=s=null}(),e=null}const r=document.querySelector(".songCredits");if(!r)return;r.innerHTML='<div class="vl-layout songCreditsWrap"><div class="f fs21 mgb-1 gap-7 mgt-la jc-sb songCreditsHead"><h3 class="fwb elp1 sc-title">Artists</h3><div class="f sc-controls gap-7"><button aria-label="Previous artists" class="sc-prev-btn" type="button"><svg class="i i-angle-left" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24"><path d="m15 18-6-6 6-6"/></svg></button><button aria-label="Next artists" class="sc-next-btn" type="button"><svg class="i i-angle-right" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24"><path d="m9 18 6-6-6-6"/></svg></button></div></div><div class="songCreditsSection"><div class="f ai-c jc-c sLoad"><div class="f ai-c jc-c loadingDots"><svg aria-hidden="true" focusable="false" role="presentation" x="0px" y="0px" viewBox="0 0 1 100"><circle class="loaderSec" cx="-140" cy="50" r="32"></circle><circle class="loaderSec" cx="0" cy="50" r="32"></circle><circle class="loaderSec" cx="140" cy="50" r="32"></circle></svg><span class="hidden">Loading...</span></div></div></div></div>';const i=r.querySelector(".songCreditsSection"),n=r.querySelector(".sc-prev-btn"),a=r.querySelector(".sc-next-btn"),o=new Set(["Singer","Cast","Writer","Composer","Video Director"]),c=document.querySelector(".tableVL table");if(!c)return void console.warn(".tableVL table not found");const l=c.tBodies&&c.tBodies[0]?c.tBodies[0]:c,d=Array.from(l.getElementsByTagName("tr")),p={};d.forEach((e=>{const t=e.getElementsByTagName("td");if(!t||t.length<2)return;const s=t[0].textContent.trim();if(!s||!o.has(s))return;const r=("Singer"===s?"Artist":s).replace("Cast","Actor").replace("Writer","Lyricist").replace("Composer","Music").replace("Artist","Singer"),i=t[1],n=[];function a(e){e&&(e=String(e).replace(/\u00A0/g," ").trim())&&e.split(",").forEach((e=>{const t=e.trim();t&&n.push({name:t,href:null,fromAnchor:!1})}))}const c=Array.from(i.childNodes||[]);for(let e=0;e<c.length;e++){const t=c[e];if(t)if(1===t.nodeType)if("a"===(t.tagName||"").toLowerCase()){const e=(t.textContent||"").trim();e&&n.push({name:e,href:t.getAttribute("href")||t.href||null,fromAnchor:!0})}else a(t.textContent);else 3===t.nodeType&&a(t.nodeValue)}n.length||a(i.textContent);const l=new Map;n.forEach((e=>{const t=e.name;if(l.has(t)){const s=l.get(t);!s.href&&e.href&&(s.href=e.href)}else l.set(t,{name:e.name,href:e.href})})),Array.from(l.values()).forEach((e=>{const t=e.name,s=e.href||null;p[t]||(p[t]={fields:new Set,link:null}),p[t].fields.add(r),s&&(p[t].link=s)}))}));let f={};try{const e=await fetch("https://raw.githubusercontent.com/vergelyrics/artists-db/refs/heads/main/artists-database.json");(await e.json()).forEach((e=>{e.person_name&&e.person_image&&(f[e.person_name.toLowerCase()]=e.person_image)}))}catch(e){console.error("Error fetching thumbnails:",e)}let u={};try{const e=await fetch("https://raw.githubusercontent.com/vergelyrics/verified-artists/refs/heads/main/verified-database.json");(await e.json()).forEach((e=>{e.person_name&&e.person_url&&(u[e.person_name.toLowerCase()]=e.person_url)}))}catch(e){console.warn("Could not load verified artist DB:",e)}const h=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);let g="";Object.entries(p).forEach((([e,t])=>{const s=Array.from(t.fields).join(", "),r=e.toLowerCase();let i=f[r]||"https://cdn.statically.io/gh/vergelyrics/assets/refs/heads/main/dist/vendors/images/default/default-500x500.jpg";const n=h?200:250;i=i.replace(/.*?:\/\//,"//").replace(/\/[ws]\d{2}.*\//,`/w${n}-h${n}-c-rw/`).replace(/=s72-[wc].*/,`=w${n}-h${n}-c-rw`);let a=t.link||null;const o=t.fields.has("Singer");if(!a&&o){const e=u[r];e&&(a=e)}a||(a=`/search?q=${encodeURIComponent(e)}`);g+=`<li class="splide__slide"><div class="ipst artist"><div class="ipstI"><img alt="${e}" loading="lazy" src="${i}" width="100%" /></div><div class="ipstBD"><h4 class="elp1 ipstT"><a ${`class="artistLnk" href="${a}"`} title="${e}">${e}</a></h4><div class="snippet" title="${s}">${s}</div></div></div></li>`}));const m=document.createElement("div");m.className="splide splideCreditsArtist",m.id="splide-artist-table",m.innerHTML=`<div class="splide__track"><ul class="splide__list">${g}</ul></div>`,i.innerHTML="",i.appendChild(m);try{e=new Splide(".splideCreditsArtist",{type:"slide",perPage:6,gap:"1rem",pagination:!1,arrows:!1,breakpoints:{150:{perPage:1},300:{perPage:2},450:{perPage:3},600:{perPage:4},750:{perPage:5},1050:{perPage:6}}}).mount()}catch(e){console.error("Splide init error",e)}n&&(t=()=>e&&e.go("<"),n.addEventListener("click",t)),a&&(s=()=>e&&e.go(">"),a.addEventListener("click",s))}window.initArtistSplide=r,r()}();
