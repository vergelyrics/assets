!function(){const e=document.querySelector(".featIn");e&&fetch("https://raw.githubusercontent.com/vergelyrics/featured/refs/heads/main/featured-database.json").then((e=>e.json())).then((t=>{if(!Array.isArray(t)||0===t.length)return;const a=e.querySelector(".skel-feat");a&&a.remove();const r=t.map((e=>{const t=e.featured_title||"Featured",a=e.featured_image||"https://cdn.statically.io/gh/vergelyrics/assets/refs/heads/main/dist/vendors/images/default/default-500x500.jpg";return`<li class="splide__slide"><div class="featCard"><a href="${e.featured_url||"#"}"${"yes"===e.featured_external?' target="_blank" rel="noopener noreferrer"':""} title="${t}"><img src="${a}" class="igLB" alt="${t}" loading="lazy" width="100%" /><div class="featTitle hidden">${t}</div></a></div></li>`})).join(""),s=document.createElement("div");s.className="featuredSlider splide",s.innerHTML=`<div class="splide__track"><ul class="splide__list">${r}</ul></div>`,e.appendChild(s);try{new Splide(".featuredSlider",{type:"loop",autoWidth:!0,autoHeight:!0,focus:"center",gap:"1rem",pagination:!1,arrows:!0,autoplay:!0,interval:4e3,pauseOnHover:!0,pauseOnFocus:!1}).mount()}catch(e){console.error("Splide init error",e)}})).catch((e=>console.error("Failed to load featured DB",e)))}();
!function(){if(!window.RECENT_DATA)return;const e=document.querySelector(".rcntS .rcntSec");if(!e)return;e.splideInstance&&e.splideInstance.destroy();const t=Object.values(window.RECENT_DATA).slice(0,10),s=e.querySelector(".skelt.items");s&&s.remove();const r=t.map((e=>{const t=e.thm||"https://cdn.statically.io/gh/vergelyrics/assets/refs/heads/main/dist/vendors/images/default/default-500x500.jpg";let s=e.ttl||"Untitled";if(e.conT){(e.conT.match(/<tr>(.*?)<\/tr>/g)||[]).forEach((e=>{const t=e.match(/<td>(.*?)<\/td>/g)||[];if(2===t.length){const e=t[0].replace(/<[^>]+>/g,"").trim(),r=t[1].replace(/<[^>]+>/g,"").trim();"song"===e.toLowerCase()&&r&&(s=r)}}))}const r=e.url||"#";let i="";if(e.conT){const t=e.conT.match(/<tr>(.*?)<\/tr>/g)||[],s=new Set;t.forEach((e=>{const t=e.match(/<td>(.*?)<\/td>/g)||[];if(2===t.length){const e=t[0].replace(/<[^>]+>/g,"").trim(),r=t[1].replace(/<[^>]+>/g,"").trim();"singer"===e.toLowerCase()&&r.split(",").forEach((e=>{const t=e.trim();t&&!/Chorus/i.test(t)&&s.add(t)}))}})),s.size>0&&(i=Array.from(s).map((e=>`<a href="/search?q=${encodeURIComponent(e)}" class="artistLink">${e}</a>`)).join(", "))}return`<li class="splide__slide"><div class="ipst"><div class="ipstI"><img alt="${s}" loading="lazy" src="${t}" width="100%" /></div><div class="ipstBD"><h3 class="elp1 ipstT"><a href="${r}" class="postURL">${s}</a></h3>${i?`<div class="snippet">${i}</div>`:""}</div></div></li>`})).join(""),i=document.createElement("div");i.className="recentPostsSlider splide",i.innerHTML=`<div class="splide__track"><ul class="splide__list">${r}</ul></div>`,e.appendChild(i);try{const t=new Splide(".recentPostsSlider",{type:"slide",perPage:6,gap:"1rem",pagination:!1,mediaQuery:"min",arrows:!1,breakpoints:{150:{perPage:1},300:{perPage:2},450:{perPage:3},600:{perPage:4},750:{perPage:5},1050:{perPage:6}}}).mount();e.splideInstance=t;const s=document.querySelector(".rcntH .sc-prev-btn"),r=document.querySelector(".rcntH .sc-next-btn");s&&s.addEventListener("click",(()=>t.go("<"))),r&&r.addEventListener("click",(()=>t.go(">")))}catch(e){console.error("Splide init error",e)}}();
!function(){if(!window.TRENDING_DATA)return;const e=document.querySelector(".trndAS .astSec");e&&fetch("https://raw.githubusercontent.com/vergelyrics/artists-db/refs/heads/main/artists-database.json").then((e=>e.json())).then((t=>{const s=new Set;Object.values(window.TRENDING_DATA).forEach((e=>{((e.conT||"").match(/<tr>(.*?)<\/tr>/g)||[]).forEach((e=>{const t=e.match(/<td>(.*?)<\/td>/g)||[];if(2===t.length){const e=t[0].replace(/<[^>]+>/g,"").trim(),r=t[1].replace(/<[^>]+>/g,"").trim();"Singer"===e&&r.split(",").forEach((e=>{const t=e.trim();t&&!/Chorus/i.test(t)&&s.add(t)}))}}))}));const r=Array.from(s).sort((()=>.5-Math.random())).slice(0,10),i=e.querySelector(".skelt.items");i&&i.remove();const a=r.map((e=>{const s=t.find((t=>t.person_name.toLowerCase()===e.toLowerCase())),r=s?s.person_image:"https://cdn.statically.io/gh/vergelyrics/assets/refs/heads/main/dist/vendors/images/default/default-500x500.jpg";return`<li class="splide__slide"><div class="ipst artist"><div class="ipstI"><img alt="${e}" loading="lazy" src="${r}" width="100%" /></div><div class="ipstBD"><h3 class="elp1 ipstT"><a class="if" href="/search?q=${encodeURIComponent(e)}" title="${e}">${e}</a></h3></div></div></li>`})).join(""),n=document.createElement("div");n.className="trendingArtistsSlider splide",n.innerHTML=`<div class="splide__track"><ul class="splide__list">${a}</ul></div>`,e.appendChild(n);try{const e=new Splide(".trendingArtistsSlider",{type:"slide",perPage:7,gap:"1rem",pagination:!1,arrows:!1,breakpoints:{150:{perPage:1},300:{perPage:2},450:{perPage:3},600:{perPage:4},750:{perPage:5},1050:{perPage:6}}}).mount(),t=document.querySelector(".trndA .sc-prev-btn"),s=document.querySelector(".trndA .sc-next-btn");t&&t.addEventListener("click",(()=>e.go("<"))),s&&s.addEventListener("click",(()=>e.go(">")))}catch(e){console.error("Splide init error",e)}})).catch((e=>console.error("Failed to load artist DB",e)))}();
