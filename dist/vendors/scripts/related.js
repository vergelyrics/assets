!function(){const t=(e=1e3)=>new Promise((i=>{(()=>{if(window.CURRENT_DATA)return i(window.CURRENT_DATA);setTimeout((()=>i(t(e))),e)})()})),e=t=>fetch(t).then((t=>{if(!t.ok)throw new Error("Fetch failed "+t.status);return t.json()})),i=t=>{for(let e=t.length-1;e>0;e--){const i=Math.floor(Math.random()*(e+1));[t[e],t[i]]=[t[i],t[e]]}return t},n=t=>{const e=(new DOMParser).parseFromString(t,"text/html"),i=e.querySelector(".tableVL table"),n={songName:null,singers:null,label:null,audioID:null,lyrics:null,sync:!1};if(i){Array.from(i.querySelectorAll("tr")).forEach((t=>{const e=t.querySelectorAll("td");if(e.length<2)return;const i=(e[0].textContent||"").trim().toLowerCase(),r=e[1].innerHTML||e[1].textContent||"",o=e[1].textContent?e[1].textContent.trim():"";if(/song/i.test(i)&&o&&(n.songName=o),/singer/i.test(i)&&r){const l=e[1],s=[];function a(t){t&&(t=String(t).replace(/\u00A0/g," ").trim())&&t.split(",").forEach((t=>{const e=t.trim();e&&s.push({name:e,href:null,fromAnchor:!1})}))}const c=Array.from(l.childNodes||[]);for(let f=0;f<c.length;f++){const g=c[f];if(g)if(1===g.nodeType){if("a"===(g.tagName||"").toLowerCase()){const m=(g.textContent||"").trim();m&&s.push({name:m,href:g.getAttribute("href")||g.href||null,fromAnchor:!0})}else a(g.textContent)}else 3===g.nodeType&&a(g.nodeValue)}s.length||a(l.textContent);const d=new Map;s.forEach((t=>{const e=t.name;if(d.has(e)){const i=d.get(e);!i.href&&t.href&&(i.href=t.href)}else d.set(e,{name:t.name,href:t.href})}));const u=Array.from(d.values()).map((t=>t.name));n.singers=u.join(", ")}/label/i.test(i)&&o&&(n.label=o)}))}const r=e.querySelector(".videoYt");if(r){const da=r.getAttribute("data-audio");if(da)n.audioID=da.trim();else{const f=r.querySelector("iframe"),fs=f&&(f.getAttribute("data-src")||f.getAttribute("src"))||"",m=fs.match(/\/embed\/([A-Za-z0-9_-]{6,})/);m&&(n.audioID=m[1])}const t=r.getAttribute("data-color-code");t&&(n.colorCode=t.trim())}else{let f=e.querySelector("iframe"),fs=f&&(f.getAttribute("data-src")||f.getAttribute("src"))||"";if(!fs&&t.includes("/embed/")){const m=t.match(/["'](?:data-src|src)=["'](?:https?:)?\/\/www\.youtube\.com\/embed\/([A-Za-z0-9_-]{6,})/i);m&&m[1]&&(fs="//www.youtube.com/embed/"+m[1])}const m=fs.match(/\/embed\/([A-Za-z0-9_-]{6,})/);m&&(n.audioID=m[1])}const o=e.querySelector(".lyricsContainer")||e.querySelector(".lyricsContain");if(o){const t=o.getAttribute("data-sync-lyrics");t&&"true"===String(t).toLowerCase()&&(n.sync=!0);let e=Array.from(o.querySelectorAll("p, div, li"));e.length||(e=Array.from(o.querySelectorAll("span")));const i=1===e.length&&e[0]&&e[0].classList&&e[0].classList.contains("dataLP"),r=[],a=t=>{null!=t&&""!==(t=String(t).replace(/\u00A0/g," ").trim())&&r.push(t)};for(let t=0;t<e.length;t++){const n=e[t];if(!n)continue;if(n.classList&&n.classList.contains("dataLP")&&!i)continue;const r=n.childNodes;let o=!1;for(let t=0;t<r.length;t++){const e=r[t];if(1!==e.nodeType)if(3!==e.nodeType);else{const t=(e.nodeValue||"").replace(/\u00A0/g," ").trim();if(t){const e=t.split(/\r?\n/);for(let t=0;t<e.length;t++){const i=e[t].trim();i&&(a(i),o=!0)}}}else{const t=e;if("br"===(t.tagName&&t.tagName.toLowerCase()))continue;const n=t.getAttribute&&t.getAttribute("data-text"),r=t.getAttribute&&t.getAttribute("data-time");if(null!=n){a(r?"["+r+"] "+n:n),o=!0;continue}const l=(t.textContent||"").replace(/\u00A0/g," ").trim();if(l){a(r?"["+r+"] "+l:l),o=!0;continue}const s=t.querySelectorAll&&t.querySelectorAll("[data-text], [data-time]");if(s&&s.length){for(let t=0;t<s.length;t++){const e=s[t];if(e.closest&&e.closest(".dataLP")&&!i)continue;const n=e.getAttribute("data-text")||e.textContent||"",r=e.getAttribute&&e.getAttribute("data-time"),l=String(n||"").replace(/\u00A0/g," ").trim();l&&(a(r?"["+r+"] "+l:l),o=!0)}continue}}}if(!o){const t=n.querySelectorAll&&n.querySelectorAll("[data-text]");if(t&&t.length)for(let e=0;e<t.length;e++){const n=t[e];if(n.closest&&n.closest(".dataLP")&&!i)continue;const r=n.getAttribute("data-text")||n.textContent||"",o=n.getAttribute&&n.getAttribute("data-time"),l=String(r||"").replace(/\u00A0/g," ").trim();l&&a(o?"["+o+"] "+l:l)}else{let t=null;t=i&&n.getAttribute&&n.getAttribute("data-text")?n.textContent||"":n.getAttribute&&n.getAttribute("data-text")||n.textContent||"";const e=String(t||"").replace(/\u00A0/g," ").trim();e&&a(e)}}t<e.length-1&&a("")}for(;r.length&&(!r[0]||""===r[0].trim());)r.shift();for(;r.length&&(!r[r.length-1]||""===r[r.length-1].trim());)r.pop();r.length?n.lyrics=r.join("\n"):n.lyrics=null}return n},r=t=>{if(!t)return null;const e=t.match(/post-([0-9]+)/);return e?e[1]:null};function o(t){try{t=Array.isArray(t)?t:[];const e=(window.CURRENT_DATA&&(window.CURRENT_DATA.id||window.CURRENT_DATA.postId||window.CURRENT_DATA.audioId)||window.CURRENT_ID||"").toString(),i=document.getElementById("related"),n=document.querySelector(".songRelated");i&&(i.innerHTML="");const r=t.filter((t=>{const i=(t.id||"").toString();return i&&i!==e}));if(!r.length)return n&&n.classList.add("hidden"),void(i&&(i.innerHTML='<div class="f ai-c jc-c noRelated">No related songs found</div>'));n&&n.classList.remove("hidden");const o="splide-related-"+Date.now(),a=document.createElement("div");a.id=o,a.className="splide reltListSlider",a.innerHTML='<div class="splide__track"><ul class="splide__list"></ul></div>';const l=a.querySelector(".splide__list");r.forEach((t=>{const e=t.id||"",i=t.title||"",n=t.image||"",r=t.postUrl||"#",o=String(t.artist||"").split(",").map((t=>t.trim())).filter(Boolean).map((t=>`<a href="/search?q=${encodeURIComponent(String(t||"").trim())}" title="${t}" class="artistLink">${t}</a>`)).join(", "),a=document.createElement("li");a.className="splide__slide",a.innerHTML=`<div class="ipst"><div class="ipstI fBL"><img alt="${i}" loading="lazy" src="${n}" width="100%" /><div class="ipstBk"><button class="br50 btn" data-play-id="${e}" data-play-from="Related" aria-label="Play Song" type="button"><span class="icon-play"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M232.3,114.3,88.3,26.4a15.5,15.5,0,0,0-16.1-.3A15.8,15.8,0,0,0,64,40V216a15.8,15.8,0,0,0,8.2,13.9,15.5,15.5,0,0,0,16.1-.3l144-87.9a16,16,0,0,0,0-27.4Z"></path></svg></span><span class="icon-pause"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24"><path d="M5.7 3a.7.7 0 0 0-.7.7v16.6a.7.7 0 0 0 .7.7h2.6a.7.7 0 0 0 .7-.7V3.7a.7.7 0 0 0-.7-.7zm10 0a.7.7 0 0 0-.7.7v16.6a.7.7 0 0 0 .7.7h2.6a.7.7 0 0 0 .7-.7V3.7a.7.7 0 0 0-.7-.7z"></path></svg></span></button></div></div><div class="ipstBD"><h4 class="elp1 ipstT"><a href="${r}" class="postURL">${i}</a></h4><div class="snippet">${o}</div></div></div>`,l.appendChild(a)})),i&&(i.innerHTML="",i.appendChild(a));const s=document.querySelector(".sc-prev-btn.related"),c=document.querySelector(".sc-next-btn.related");let d=null;try{if(window.Splide){if(d){try{d.destroy()}catch(t){}d=null}d=new Splide(`#${o}`,{type:"slide",perPage:6,gap:"1rem",pagination:!1,arrows:!1,mediaQuery:"min",breakpoints:{150:{perPage:1},300:{perPage:2},450:{perPage:3},600:{perPage:4},750:{perPage:5}}}).mount(),s&&s.addEventListener("click",(()=>d.go("<"))),c&&c.addEventListener("click",(()=>d.go(">")))}else console.warn("Splide not found. Make sure Splide is loaded before this script.")}catch(t){console.warn("[initArtistCarousel] Splide init error:",t)}i&&i.addEventListener("click",(t=>{const e=t.target.closest&&t.target.closest("button.btn");if(!e)return;const i=e.getAttribute("data-play-id"),n=e.getAttribute("data-play-from")||"Related",r=new CustomEvent("related:play",{detail:{id:i,from:n}});window.dispatchEvent(r)}))}catch(t){console.error("renderRelated error",t)}}!async function(){try{const a=await t(1e3);window.CURRENT_DATA=a||window.CURRENT_DATA||{};const l=((a.artist||"")+"").split(",").map((t=>t.trim())).filter(Boolean),s=5,c=10,d=new Set,u=new Set,f=[],g=(a.id||"")+"",m=a.name||a.title||"",p=a.artist||"",h=t=>{if(!t)return"";if("string"==typeof t.audioId&&t.audioId.trim())return t.audioId.trim();if("string"==typeof t.audioID&&t.audioID.trim())return t.audioID.trim();if("string"==typeof t.audioid&&t.audioid.trim())return t.audioid.trim();if("string"==typeof t.videoId&&t.videoId.trim())return t.videoId.trim();if("string"==typeof t.videoID&&t.videoID.trim())return t.videoID.trim();for(const e of Object.keys(t)){if(/audio/i.test(e)&&"string"==typeof t[e]&&t[e].trim())return t[e].trim();if(/video/i.test(e)&&"string"==typeof t[e]&&t[e].trim())return t[e].trim()}return""},y=a.image||a.media$thumbnail&&a.media$thumbnail.url||"",A=h(a),b=a.label||"";if(m||g){const t={id:g||"",title:m||"",artist:p||"",image:y?y.replace(/\/s72-c(\/)?/,"/s500/"):"",audioID:A||"",label:b||"",lyrics:a.lyrics||null,sync:!!a.sync};a.colorCode&&(t.colorCode=a.colorCode),t.id?d.add(t.id):u.add((t.title+"|"+t.artist).toLowerCase()),f.push(t)}const w=(()=>{try{const t=document.querySelector(".aboutSongVL p");return t&&["Telugu","Hindi","Tamil","Punjabi","Odia","Malayalam","Kannada","Assamese","Bengali","Korean","Khortha","Bhojpuri","Marathi","Haryanvi","Garhwali","Nepali","Chhattisgarhi","Spanish","Nagpuri","English"].find((e=>t.innerHTML.includes(e)))||null}catch(t){return console.warn("Language detection failed",t),null}})();for(const t of l){if(f.length>=c)break;const o=encodeURIComponent(t),a=[];w&&a.push(`/feeds/posts/default?q=${o}+${encodeURIComponent(w)}&max-results=99&alt=json`),a.push(`/feeds/posts/default?q=${o}&max-results=99&alt=json`);let l=[],m=!1;for(let i=0;i<a.length;i++){const n=a[i];try{const i=await e(n);if(l=i&&i.feed&&i.feed.entry?i.feed.entry:[],m=!0,l&&l.length)break;console.info("No entries for",t,"with url",n)}catch(t){console.warn("Fetch failed for",n,t);continue}}if(!m)continue;if(!l.length)continue;const p=l.map((e=>{const i=e.content&&e.content.$t?e.content.$t:"",o=n(i),a=o.songName||e.title&&e.title.$t||"",l=o.singers||t,s=o.label||"",c=e.media$thumbnail&&e.media$thumbnail.url?e.media$thumbnail.url:"",d=((u=c)?u.replace(/\/s72-c(\/)?/,"/s500/"):null)||"";var u;const f=o.audioID||"",g=r(e.id&&e.id.$t?e.id.$t:"")||"";let m="#";try{if(e.link&&Array.isArray(e.link)){const t=e.link.find((t=>"alternate"===t.rel&&t.type&&-1!==t.type.indexOf("text/html")));t&&t.href&&(m=t.href)}}catch(t){}const p={id:g||"",title:a||"",artist:l||t,image:d||"",audioID:f||"",label:s||"",lyrics:o.lyrics||null,sync:!!o.sync,postUrl:m};return o.colorCode&&(p.colorCode=o.colorCode),p})).filter((t=>t.title)),h=i(p).slice(0,s);for(const t of h){if(f.length>=c)break;if(!t.id||!g||t.id!==g){if(t.id){if(d.has(t.id))continue;d.add(t.id)}else{const e=(t.title+"|"+t.artist).toLowerCase();if(u.has(e))continue;u.add(e)}f.push(t)}}}let C=f.slice(0,c);if(C.length>1){const t=C[0],e=C.slice(1);C=[t].concat(i(e).slice(0,c-1))}C.length?window.QUEUE_DATA=C:window.QUEUE_DATA=[{id:"",title:"No Songs Found",artist:"",image:"",audioID:"",label:"",lyrics:null,sync:!1}],o(window.QUEUE_DATA||[])}catch(t){console.error("Error building QUEUE_DATA:",t),window.QUEUE_DATA=[{id:"",title:"No Songs Found",artist:"",image:"",audioID:"",label:"",lyrics:null,sync:!1}],o(window.QUEUE_DATA||[])}}()}();
