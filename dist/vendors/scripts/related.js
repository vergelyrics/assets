!function(){const t=(e=1e3)=>new Promise((n=>{(()=>{if(window.CURRENT_DATA)return n(window.CURRENT_DATA);setTimeout((()=>n(t(e))),e)})()})),e=t=>fetch(t).then((t=>{if(!t.ok)throw new Error("Fetch failed "+t.status);return t.json()})),n=t=>{for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t},i=t=>{const e=(new DOMParser).parseFromString(t,"text/html"),n=e.querySelector(".tableVL table"),i={songName:null,singers:null,label:null,audioID:null,lyrics:null,sync:!1};n&&Array.from(n.querySelectorAll("tr")).forEach((t=>{const e=t.querySelectorAll("td");if(e.length<2)return;const n=(e[0].textContent||"").trim().toLowerCase(),r=e[1].innerHTML||e[1].textContent||"",o=e[1].textContent?e[1].textContent.trim():"";if(/song/i.test(n)&&o&&(i.songName=o),/singer/i.test(n)&&r){const s=e[1],l=[];function a(t){t&&(t=String(t).replace(/\u00A0/g," ").trim())&&t.split(",").forEach((t=>{const e=t.trim();e&&l.push({name:e,href:null,fromAnchor:!1})}))}const c=Array.from(s.childNodes||[]);for(let f=0;f<c.length;f++){const g=c[f];if(g)if(1===g.nodeType)if("a"===(g.tagName||"").toLowerCase()){const h=(g.textContent||"").trim();h&&l.push({name:h,href:g.getAttribute("href")||g.href||null,fromAnchor:!0})}else a(g.textContent);else 3===g.nodeType&&a(g.nodeValue)}l.length||a(s.textContent);const d=new Map;l.forEach((t=>{const e=t.name;if(d.has(e)){const n=d.get(e);!n.href&&t.href&&(n.href=t.href)}else d.set(e,{name:t.name,href:t.href})}));const u=Array.from(d.values()).map((t=>t.name));i.singers=u.join(", ")}/label/i.test(n)&&o&&(i.label=o)}));const r=e.querySelector(".videoYt");if(r){const t=r.getAttribute("data-audio");if(t)i.audioID=t.trim();else{const t=r.querySelector("iframe"),e=(t&&(t.getAttribute("data-src")||t.getAttribute("src"))||"").match(/\/embed\/([A-Za-z0-9_-]{6,})/);e&&(i.audioID=e[1])}const e=r.getAttribute("data-color-code");e&&(i.colorCode=e.trim())}else{let n=e.querySelector("iframe"),r=n&&(n.getAttribute("data-src")||n.getAttribute("src"))||"";if(!r&&t.includes("/embed/")){const e=t.match(/["'](?:data-src|src)=["'](?:https?:)?\/\/www\.youtube\.com\/embed\/([A-Za-z0-9_-]{6,})/i);e&&e[1]&&(r="//www.youtube.com/embed/"+e[1])}const o=r.match(/\/embed\/([A-Za-z0-9_-]{6,})/);o&&(i.audioID=o[1])}const o=e.querySelector(".lyricsContainer")||e.querySelector(".lyricsContain");if(o){const t=function(t){if(!t)return null;const e=[],n=Array.from(t.childNodes);for(const t of n)1===t.nodeType&&t.classList.contains("hLB")||(1===t.nodeType&&t.classList.contains("hLT")?(i=t.getAttribute("data-time"),r=t.textContent,(r=String(r||"").replace(/\u00A0/g," ").trim())&&e.push(i?`[${i}] ${r}`:r)):1===t.nodeType&&"BR"===t.tagName&&e.length&&""!==e[e.length-1]&&e.push(""));for(var i,r;e.length&&!e[0];)e.shift();for(;e.length&&!e[e.length-1];)e.pop();return e.length?e.join("\n"):null}(o);t&&(i.lyrics=t,i.sync="true"===String(o.getAttribute("data-sync-lyrics")).toLowerCase());const e=o.getAttribute("data-sync-lyrics");e&&"true"===String(e).toLowerCase()&&(i.sync=!0);let n=i.lyrics?[]:Array.from(o.querySelectorAll("p, div, li"));n.length||(n=Array.from(o.querySelectorAll("span")));const r=1===n.length&&n[0]&&n[0].classList&&n[0].classList.contains("dataLP"),a=[],s=t=>{null!=t&&""!==String(t).replace(/\u00A0/g," ").trim()&&a.push(String(t).replace(/\u00A0/g," ").trim())};for(let t=0;t<n.length;t++){const e=n[t];if(!e)continue;if(e.classList&&e.classList.contains("hLB"))continue;if(e.classList&&e.classList.contains("dataLP")&&!r)continue;const i=e.childNodes;let o=!1;for(let t=0;t<i.length;t++){const e=i[t];if(e&&(1!==e.nodeType||!e.classList||!e.classList.contains("hLB")))if(3===e.nodeType){const t=(e.nodeValue||"").replace(/\u00A0/g," ").trim();if(t){const e=t.split(/\r?\n/);for(let t=0;t<e.length;t++){const n=e[t].trim();n&&(s(n),o=!0)}}}else if(1===e.nodeType){if("br"===(e.tagName||"").toLowerCase())continue;const t=e.getAttribute&&e.getAttribute("data-text"),n=e.getAttribute&&e.getAttribute("data-time");if(e.classList&&e.classList.contains("hLB"))continue;if(null!=t){s(n?"["+n+"] "+t:t),o=!0;continue}const i=(e.textContent||"").replace(/\u00A0/g," ").trim();if(i){s(n?"["+n+"] "+i:i),o=!0;continue}const r=e.querySelectorAll&&e.querySelectorAll("[data-text], [data-time]");if(r&&r.length){for(let t=0;t<r.length;t++){const e=r[t];if(e.closest&&e.closest(".hLB"))continue;const n=e.getAttribute("data-text")||e.textContent||"",i=e.getAttribute&&e.getAttribute("data-time"),a=String(n||"").replace(/\u00A0/g," ").trim();a&&(s(i?"["+i+"] "+a:a),o=!0)}continue}}}if(!o){const t=e.querySelectorAll&&e.querySelectorAll("[data-text]");if(t&&t.length)for(let e=0;e<t.length;e++){const n=t[e];if(n.closest&&n.closest(".hLB"))continue;const i=n.getAttribute("data-text")||n.textContent||"",r=n.getAttribute&&n.getAttribute("data-time"),a=String(i||"").replace(/\u00A0/g," ").trim();a&&(s(r?"["+r+"] "+a:a),o=!0)}else{let t=null;t=r&&e.getAttribute&&e.getAttribute("data-text")?e.textContent||"":e.getAttribute&&e.getAttribute("data-text")?e.getAttribute("data-text"):e.textContent||"";const n=String(t||"").replace(/\u00A0/g," ").trim();n&&(s(n),o=!0)}}t<n.length-1&&s("")}for(;a.length&&(!a[0]||""===a[0].trim());)a.shift();for(;a.length&&(!a[a.length-1]||""===a[a.length-1].trim());)a.pop();a.length?i.lyrics=a.join("\n"):i.lyrics=null}return i},r=t=>{if(!t)return null;const e=t.match(/post-([0-9]+)/);return e?e[1]:null};function o(t){try{t=Array.isArray(t)?t:[];const e=(window.CURRENT_DATA&&(window.CURRENT_DATA.id||window.CURRENT_DATA.postId||window.CURRENT_DATA.audioId)||window.CURRENT_ID||"").toString(),n=document.getElementById("related"),i=document.querySelector(".songRelated");n&&(n.innerHTML="");const r=t.filter((t=>{const n=(t.id||"").toString();return n&&n!==e}));if(!r.length)return i&&i.classList.add("hidden"),void(n&&(n.innerHTML='<div class="f ai-c jc-c noRelated">No related songs found</div>'));i&&i.classList.remove("hidden");const o="splide-related-"+Date.now(),a=document.createElement("div");a.id=o,a.className="splide reltListSlider",a.innerHTML='<div class="splide__track"><ul class="splide__list"></ul></div>';const s=a.querySelector(".splide__list");r.forEach((t=>{const e=t.id||"",n=t.title||"",i=t.image||"",r=t.postUrl||"#",o=String(t.artist||"").split(",").map((t=>t.trim())).filter(Boolean).map((t=>`<a href="/search?q=${encodeURIComponent(String(t||"").trim())}" title="${t}" class="artistLink">${t}</a>`)).join(", "),a=document.createElement("li");a.className="splide__slide",a.innerHTML=`<div class="ipst"><div class="ipstI fBL"><img alt="${n}" loading="lazy" src="${i}" width="100%" /><div class="ipstBk"><button class="br50 btn" data-play-id="${e}" data-play-from="Related" aria-label="Play Song" type="button"><span class="icon-play"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M232.3,114.3,88.3,26.4a15.5,15.5,0,0,0-16.1-.3A15.8,15.8,0,0,0,64,40V216a15.8,15.8,0,0,0,8.2,13.9,15.5,15.5,0,0,0,16.1-.3l144-87.9a16,16,0,0,0,0-27.4Z"></path></svg></span><span class="icon-pause"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24"><path d="M5.7 3a.7.7 0 0 0-.7.7v16.6a.7.7 0 0 0 .7.7h2.6a.7.7 0 0 0 .7-.7V3.7a.7.7 0 0 0-.7-.7zm10 0a.7.7 0 0 0-.7.7v16.6a.7.7 0 0 0 .7.7h2.6a.7.7 0 0 0 .7-.7V3.7a.7.7 0 0 0-.7-.7z"></path></svg></span></button></div></div><div class="ipstBD"><h4 class="elp1 ipstT"><a href="${r}" class="postURL">${n}</a></h4><div class="snippet">${o}</div></div></div>`,s.appendChild(a)})),n&&(n.innerHTML="",n.appendChild(a));const l=document.querySelector(".sc-prev-btn.related"),c=document.querySelector(".sc-next-btn.related");let d=null;try{if(window.Splide){if(d){try{d.destroy()}catch(t){}d=null}d=new Splide(`#${o}`,{type:"slide",perPage:6,gap:"1rem",pagination:!1,arrows:!1,mediaQuery:"min",breakpoints:{150:{perPage:1},300:{perPage:2},450:{perPage:3},600:{perPage:4},750:{perPage:5}}}).mount(),l&&l.addEventListener("click",(()=>d.go("<"))),c&&c.addEventListener("click",(()=>d.go(">")))}else console.warn("Splide not found. Make sure Splide is loaded before this script.")}catch(t){console.warn("[initArtistCarousel] Splide init error:",t)}n&&n.addEventListener("click",(t=>{const e=t.target.closest&&t.target.closest("button.btn");if(!e)return;const n=e.getAttribute("data-play-id"),i=e.getAttribute("data-play-from")||"Related",r=new CustomEvent("related:play",{detail:{id:n,from:i}});window.dispatchEvent(r)}))}catch(t){console.error("renderRelated error",t)}}!async function(){try{const a=await t(1e3);window.CURRENT_DATA=a||window.CURRENT_DATA||{};const s=((a.artist||"")+"").split(",").map((t=>t.trim())).filter(Boolean),l=5,c=10,d=new Set,u=new Set,f=[],g=(a.id||"")+"",h=a.name||a.title||"",m=a.artist||"",p=t=>{if(!t)return"";if("string"==typeof t.audioId&&t.audioId.trim())return t.audioId.trim();if("string"==typeof t.audioID&&t.audioID.trim())return t.audioID.trim();if("string"==typeof t.audioid&&t.audioid.trim())return t.audioid.trim();if("string"==typeof t.videoId&&t.videoId.trim())return t.videoId.trim();if("string"==typeof t.videoID&&t.videoID.trim())return t.videoID.trim();for(const e of Object.keys(t)){if(/audio/i.test(e)&&"string"==typeof t[e]&&t[e].trim())return t[e].trim();if(/video/i.test(e)&&"string"==typeof t[e]&&t[e].trim())return t[e].trim()}return""},y=a.image||a.media$thumbnail&&a.media$thumbnail.url||"",A=p(a),b=a.label||"";if(h||g){const t={id:g||"",title:h||"",artist:m||"",image:y?y.replace(/\/s72-c(\/)?/,"/s500/"):"",audioID:A||"",label:b||"",lyrics:a.lyrics||null,sync:!!a.sync};a.colorCode&&(t.colorCode=a.colorCode),t.id?d.add(t.id):u.add((t.title+"|"+t.artist).toLowerCase()),f.push(t)}const w=(()=>{try{const t=document.querySelector(".aboutSongVL p");return t&&["Telugu","Hindi","Tamil","Punjabi","Odia","Malayalam","Kannada","Assamese","Bengali","Korean","Khortha","Bhojpuri","Marathi","Haryanvi","Garhwali","Nepali","Chhattisgarhi","Spanish","Nagpuri","English"].find((e=>t.innerHTML.includes(e)))||null}catch(t){return console.warn("Language detection failed",t),null}})();for(const t of s){if(f.length>=c)break;const o=encodeURIComponent(t),a=[];w&&a.push(`/feeds/posts/default?q=${o}+${encodeURIComponent(w)}&max-results=99&alt=json`),a.push(`/feeds/posts/default?q=${o}&max-results=99&alt=json`);let s=[],h=!1;for(let n=0;n<a.length;n++){const i=a[n];try{const n=await e(i);if(s=n&&n.feed&&n.feed.entry?n.feed.entry:[],h=!0,s&&s.length)break;console.info("No entries for",t,"with url",i)}catch(t){console.warn("Fetch failed for",i,t);continue}}if(!h)continue;if(!s.length)continue;const m=s.map((e=>{const n=e.content&&e.content.$t?e.content.$t:"",o=i(n),a=o.songName||e.title&&e.title.$t||"",s=o.singers||t,l=o.label||"",c=((d=e.media$thumbnail&&e.media$thumbnail.url?e.media$thumbnail.url:"")?d.replace(/\/s72-c(\/)?/,"/s500/"):null)||"";var d;const u=o.audioID||"",f=r(e.id&&e.id.$t?e.id.$t:"")||"";let g="#";try{if(e.link&&Array.isArray(e.link)){const t=e.link.find((t=>"alternate"===t.rel&&t.type&&-1!==t.type.indexOf("text/html")));t&&t.href&&(g=t.href)}}catch(t){}const h={id:f||"",title:a||"",artist:s||t,image:c||"",audioID:u||"",label:l||"",lyrics:o.lyrics||null,sync:!!o.sync,postUrl:g};return o.colorCode&&(h.colorCode=o.colorCode),h})).filter((t=>t.title)),p=n(m).slice(0,l);for(const t of p){if(f.length>=c)break;if(!t.id||!g||t.id!==g){if(t.id){if(d.has(t.id))continue;d.add(t.id)}else{const e=(t.title+"|"+t.artist).toLowerCase();if(u.has(e))continue;u.add(e)}f.push(t)}}}let L=f.slice(0,c);if(L.length>1){const t=L[0],e=L.slice(1);L=[t].concat(n(e).slice(0,c-1))}L.length?window.QUEUE_DATA=L:window.QUEUE_DATA=[{id:"",title:"No Songs Found",artist:"",image:"",audioID:"",label:"",lyrics:null,sync:!1}],o(window.QUEUE_DATA||[])}catch(t){console.error("Error building QUEUE_DATA:",t),window.QUEUE_DATA=[{id:"",title:"No Songs Found",artist:"",image:"",audioID:"",label:"",lyrics:null,sync:!1}],o(window.QUEUE_DATA||[])}}()}();
